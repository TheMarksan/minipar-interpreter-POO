C_CHANNEL canal_resultados;

INT input_int(STRING mensagem) {
    print(mensagem + "\n");
    INT valor;
    valor = 5;
    return valor;
}

INT calcular_fatorial(INT n) {
    INT fatorial;
    INT i;
    fatorial = 1;
    for i = 1; i <= n; i = i + 1 {
        fatorial = fatorial * i;
    }
    return fatorial;
}

VOID thread_fatorial() {
    INT n;
    n = input_int("Digite um numero para calcular o fatorial:");
    INT fatorial;
    fatorial = calcular_fatorial(n);
    
    canal_resultados.send(fatorial);
    
    print("Thread Fatorial finalizada.\n");
}

VOID thread_fibonacci() {
    INT n;
    n = input_int("Digite a quantidade de termos da Serie de Fibonacci:");
    INT a;
    INT b;
    INT temp;
    INT i;
    a = 0;
    b = 1;

    for i = 0; i < n; i = i + 1 {
        canal_resultados.send(a);
        temp = a + b;
        a = b;
        b = temp;
    }
    print("Thread Fibonacci finalizada.\n");
}

PAR {
    thread_fatorial();
    thread_fibonacci();
}

SEQ {
    INT recebido;
    INT i;
    
    print("Recebendo resultados:\n");
    for i = 0; i < 6; i = i + 1 {
        canal_resultados.receive(recebido);
        print("Valor recebido do canal: " + recebido + "\n");
    }

    print("Execucao paralela finalizada.\n");
}
