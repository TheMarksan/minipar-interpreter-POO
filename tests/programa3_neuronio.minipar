INT ativacao(FLOAT soma) {
    if soma >= 0 {
        return 1;
    } else {
        return 0;
    }
}

class Neuronio {
    FLOAT input_val;
    FLOAT output_desejado;
    FLOAT peso;
    FLOAT peso_bias;
    FLOAT bias;
    FLOAT taxa_aprendizado;
    FLOAT erro;
    INT iteracao;

    VOID inicializar(FLOAT input_val_, FLOAT output_desejado_, FLOAT peso_inicial, FLOAT peso_bias_inicial, FLOAT taxa) {
        this.input_val = input_val_;
        this.output_desejado = output_desejado_;
        this.peso = peso_inicial;
        this.peso_bias = peso_bias_inicial;
        this.bias = 1;
        this.taxa_aprendizado = taxa;
        this.erro = 999999;
        this.iteracao = 0;
    }

    VOID treinar() {
        print("Entrada: " + this.input_val + " | Saida desejada: " + this.output_desejado);
        while this.erro != 0 {
            this.iteracao = this.iteracao + 1;
            print("#### Iteracao: " + this.iteracao);
            print("Peso: " + this.peso);

            FLOAT soma;
            INT saida;
            soma = this.input_val * this.peso + this.bias * this.peso_bias;
            saida = ativacao(soma);
            print("Saida: " + saida);

            this.erro = this.output_desejado - saida;
            print("Erro: " + this.erro);

            if this.erro != 0 {
                this.peso = this.peso + this.taxa_aprendizado * this.input_val * this.erro;
                this.peso_bias = this.peso_bias + this.taxa_aprendizado * this.bias * this.erro;
            }

            print("Peso do bias: " + this.peso_bias);
        }
        print("Parabens! O neuronio aprendeu.");
        print("Valor desejado: " + this.output_desejado);
    }
}

SEQ {
    Neuronio neuronio;
    neuronio = new Neuronio();
    neuronio.inicializar(1, 0, 0.5, 0.5, 0.01);
    neuronio.treinar();
}
